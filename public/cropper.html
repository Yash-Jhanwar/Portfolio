<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Favicon Cropper</title>
</head>

<body>
    <div id="output">Please wait...</div>
    <script>
        async function cropImage() {
            const img = new Image();
            img.crossOrigin = "Anonymous";
            img.src = "/src/assets/profile/profile.png";

            await new Promise((resolve, reject) => {
                img.onload = resolve;
                img.onerror = reject;
            });

            const canvas = document.createElement("canvas");
            const size = Math.min(img.width, img.height);
            canvas.width = size;
            canvas.height = size;

            const ctx = canvas.getContext("2d");

            // Draw circular clip
            ctx.beginPath();
            ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2, true);
            ctx.closePath();
            ctx.clip();

            // Draw image centered
            const x = (size - img.width) / 2;
            const y = (size - img.height) / 2;
            ctx.drawImage(img, x, y, img.width, img.height);

            // Get data URL
            const dataURL = canvas.toDataURL("image/png");
            document.getElementById("output").textContent = dataURL;
        }

        cropImage().catch(err => {
            document.getElementById("output").textContent = "ERROR: " + err.message;
        });
    </script>
</body>

</html>